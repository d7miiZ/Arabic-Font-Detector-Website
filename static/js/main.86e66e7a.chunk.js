(this["webpackJsonpcalbot-website"]=this["webpackJsonpcalbot-website"]||[]).push([[0],{15:function(e,t,a){e.exports={text:"MainSection_text__NBZyd",h3:"MainSection_h3__2Ikve",ResultsImg:"MainSection_ResultsImg__a-jlh"}},21:function(e,t,a){e.exports={h1:"Description_h1__39B38",card:"Description_card__3KNlV",link:"Description_link__15d9x"}},26:function(e,t,a){e.exports={backdrop:"Modal_backdrop___WxAs",modal:"Modal_modal__226NA","slide-down":"Modal_slide-down__xuc_T"}},44:function(e,t,a){},45:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(13),r=a.n(s),c=(a(44),a(45),a(76)),i=a(21),o=a.n(i),l=a(1),d=[Object(l.jsx)("a",{className:o.a.link,href:"https://github.com/Hawzen",target:"_blank",rel:"noreferrer",children:"Hawzen"}),Object(l.jsx)("a",{className:o.a.link,href:"https://github.com/d7miiZ",target:"_blank",rel:"noreferrer",children:"D7miiZ"}),Object(l.jsx)("a",{className:o.a.link,href:"https://github.com/soraxksa",target:"_blank",rel:"noreferrer",children:"SoraxKsa"})];!function(e){for(var t,a=e.length;0!==a;){t=Math.floor(Math.random()*a),a--;var n=[e[t],e[a]];e[a]=n[0],e[t]=n[1]}}(d);var j=function(){return Object(l.jsx)("div",{children:Object(l.jsxs)(c.a,{className:o.a.card,maxWidth:"sm",children:[Object(l.jsx)("p",{children:"Caligraphy Bot (CALBOT) can discern two arabic handwritten fonts, Ruqa (\u0631\u0642\u0639\u0629) and Nask (\u0646\u0633\u062e) (including each font's variations) from each other. Given an image of the handwriting CALBOT uses Convolutional Neural Networks (CNNS) to analyze and predict which font is more similar to the handwriting. This page will detail the training process, architecture and results of CALBOT."}),Object(l.jsxs)("span",{children:["Done by: ","",d[0]," ",d[1]," ",d[2]]})]})})},m=a(15),h=a.n(m),b=a.p+"static/media/results.184f1e60.png",p=a.p+"static/media/test.8c0a4671.png",u=a.p+"static/media/train.031989d0.png",x=function(){return Object(l.jsxs)("section",{children:[Object(l.jsxs)(c.a,{maxWidth:"sm",className:h.a.text,children:[Object(l.jsx)("h3",{children:"Data Collection:"}),Object(l.jsxs)("p",{children:["Finding quality training images isn't an easy task, since data isn't always organized and labeled and fonts aren't clearly defined. We opted to generate our training samples from computer fonts. The problem with generating data is that the model tends to memorize the fonts we trained it with and not generalize to all variations of the font. Thankfully this can be relieved by applying random transfomations on the images like skewing, cropping, bluring, etc. We used 7 different fonts for training the model (4 Nask, 3 Ruqa). We used fonts from ",Object(l.jsx)("a",{target:"_blank",href:"https://arbfonts.com/arabic_fonts",rel:"noreferrer",children:"here"})," and from ",Object(l.jsx)("a",{target:"_blank",href:"https://www.arfonts.net/",rel:"noreferrer",children:"here"}),". Then sampled a text from ",Object(l.jsx)("a",{target:"_blank",href:"https://mawdoo3.com/",rel:"noreferrer",children:"here"}),". After that we started generating images (~500 images), each seven lines long. We cut each image to smaller 200x200 chunks and store them for training."]})]}),Object(l.jsx)(c.a,{maxWidth:"md",children:Object(l.jsx)("img",{src:p,className:h.a.ResultsImg,alt:"sry"})}),Object(l.jsxs)(c.a,{maxWidth:"sm",className:h.a.text,children:[Object(l.jsx)("h3",{children:"Model Architecture:"}),Object(l.jsxs)("p",{children:["Our architecture is a simple Conv and Linear layers. Here's more detail",Object(l.jsxs)("span",{style:{display:"block",clear:"both",whiteSpace:"pre",fontSize:"0.7em"},children:[Object(l.jsx)("br",{}),"# Init ",Object(l.jsx)("br",{}),"self.conv1 = nn.Conv2d(1, 10, kernel_size=3, padding=1)  ",Object(l.jsx)("br",{}),"self.conv2 = nn.Conv2d(10, 30, kernel_size=3, padding=1)",Object(l.jsx)("br",{}),"self.conv3 = nn.Conv2d(30, 50, kernel_size=3, padding=1)",Object(l.jsx)("br",{}),"self.conv4 = nn.Conv2d(50, 70, kernel_size=3, padding=1)",Object(l.jsx)("br",{}),"self.pool = nn.MaxPool2d(kernel_size=3, stride=2)",Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),"self.fc1 = nn.Linear(70 * 11 * 11, 437) ",Object(l.jsx)("br",{}),"self.fc2 = nn.Linear(437, 109)",Object(l.jsx)("br",{}),"self.fc3 = nn.Linear(109, 50)",Object(l.jsx)("br",{}),"self.fc4 = nn.Linear(50, 2)",Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),"#Forward ",Object(l.jsx)("br",{}),"x = self.pool(F.relu(self.conv1(x)))",Object(l.jsx)("br",{}),"x = self.pool(F.relu(self.conv2(x)))",Object(l.jsx)("br",{}),"x = self.pool(F.relu(self.conv3(x)))",Object(l.jsx)("br",{}),"x = self.pool(F.relu(self.conv4(x)))",Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),"x = torch.flatten(x, 1) # flatten all dimensions except batch",Object(l.jsx)("br",{}),"x = F.relu(self.fc1(x))",Object(l.jsx)("br",{}),"x = F.relu(self.fc2(x))",Object(l.jsx)("br",{}),"x = F.relu(self.fc3(x))",Object(l.jsx)("br",{}),"x = self.fc4(x)",Object(l.jsx)("br",{}),"return x",Object(l.jsx)("br",{}),Object(l.jsx)("br",{})]}),"We also experimented with augmenting our training data so that the model generalizes better, rather than memorizing the fonts we used. Heres a sample from the training data:"]})]}),Object(l.jsx)(c.a,{maxWidth:"md",children:Object(l.jsx)("img",{src:u,className:h.a.ResultsImg,alt:"sry"})}),Object(l.jsxs)(c.a,{maxWidth:"sm",className:h.a.text,children:[Object(l.jsx)("h3",{children:"Results:"}),Object(l.jsx)("p",{children:"The model seems to capture the different universal characters of the two fonts, for example, Ruqa will usually write the dots as one stroke rather than seperate dots. So testing it with an image it didnt saw before of a Ruqa-like font will usually perform well. The model scored an accuracy of 100% on the training, validation and testing. Though all of the three mentioned sets are generated so that doesn't mean as much. The model however scored a 31/32 from photos of various sources, as shown in the picture:"})]}),Object(l.jsx)(c.a,{maxWidth:"md",children:Object(l.jsx)("img",{src:b,className:h.a.ResultsImg,alt:"sry"})})]})},f=a(25),g=a(22),O=a.n(g),_=a(28),y=a(14),k=a(36),v=a(78),w=a(83),N=a(81),C=a(84),B=a(82),L=a(80),D=a(79),I=a(6),S=a.n(I),T=a(26),P=a.n(T),z=function(e){return Object(l.jsx)("div",{className:P.a.backdrop,onClick:e.onClose})},R=function(e){return Object(l.jsx)("div",{className:"".concat(P.a.modal," ").concat(e.classes),children:Object(l.jsx)("div",{className:P.a.content,children:e.children})})},F=document.getElementById("overlays"),W=function(e){return Object(l.jsxs)(n.Fragment,{children:[r.a.createPortal(Object(l.jsx)(z,{onClose:e.onClose}),F),r.a.createPortal(Object(l.jsx)(R,{classes:e.classes,children:e.children}),F)]})},A=a.p+"static/media/nask.4cb9fc66.png",q=a.p+"static/media/nask2.2daaa54f.png",M=a.p+"static/media/nask3.15cdabc3.png",E=a.p+"static/media/ruqa.f34d6854.png",U=a.p+"static/media/ruqa2.f03a3c22.png",H=a.p+"static/media/ruqa3.090df105.jpg",K=Object(v.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden"},imageList:{width:500,height:450}}})),Z=[[A,"Nask1"],[q,"Nask2"],[M,"Nask3"],[E,"Ruqa1"],[U,"Ruqa2"],[H,"Ruqa3"]].map((function(e){return{img:e[0],title:e[1],key:e[1]}})),G=function(){var e=Object(n.useState)(0),t=Object(y.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)(""),i=Object(y.a)(r,2),o=i[0],d=i[1],j=Object(n.useState)(""),m=Object(y.a)(j,2),h=m[0],b=m[1],p=Object(n.useState)(null),u=Object(y.a)(p,2),x=u[0],g=u[1],v=Object(n.useState)(!1),I=Object(y.a)(v,2),T=I[0],P=I[1],z=Object(n.useState)(!1),R=Object(y.a)(z,2),F=R[0],A=R[1],q=K(),M=Object(D.a)("(min-width:600px)"),E=function(){0!==a&&document.getElementById(a).classList.remove(S.a.selected),d(""),g(null),s(0),A(!1)},U=function(e){var t=e.target.getAttribute("data-key"),n=e.target.src;a===t?document.getElementById(a).classList.contains(S.a.selected)?(document.getElementById(a).classList.remove(S.a.selected),d("")):(document.getElementById(a).classList.add(S.a.selected),d(n),g(null)):(0!==a&&document.getElementById(a).classList.remove(S.a.selected),document.getElementById(t).classList.add(S.a.selected),d(n),g(null)),s(t)},H=function(){var e=Object(_.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(!0),fetch(o).then(function(){var e=Object(_.a)(O.a.mark((function e(t){var a,n,s,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.headers.get("content-type"),e.next=3,t.blob();case 3:n=e.sent,s=new File([n],o,{contentType:a}),(r=new FormData).append("image",s),fetch("https://arabic-caligraphy-classifier.herokuapp.com/api/calbot/predict",{method:"POST",body:r}).then((function(e){return e.json()})).then((function(e){b(e.pred),P(!1),A(!0)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=Object(n.useCallback)((function(e){g(e[0]),d("")}),[]),J=Object(k.a)({accept:".png, .jpg, .jpeg",noClick:!0,noKeyboard:!0,maxFiles:1,onDropAccepted:G}),V=J.getRootProps,Y=J.getInputProps,Q=J.open,X=T?Object(l.jsx)(L.a,{className:S.a.margin}):Object(l.jsx)(w.a,{size:"large",variant:"contained",className:S.a.PredBtn,onClick:H,children:"Predict"}),$=T?Object(l.jsx)(L.a,{className:S.a.margin}):Object(l.jsx)(w.a,{size:"large",variant:"contained",className:S.a.PredBtn,onClick:function(){P(!0);var e=new FormData;e.append("image",x),fetch("https://arabic-caligraphy-classifier.herokuapp.com/api/calbot/predict",{method:"POST",body:e}).then((function(e){return e.json()})).then((function(e){b(e.pred),P(!1),A(!0)}))},children:"Predict"});return Object(l.jsxs)("div",{style:{marginTop:"2em"},children:[Object(l.jsx)("code",{style:{fontSize:"7em",fontFamily:"monospace",letterSpacing:"0.1em",fontWeight:""},children:"DEMO"}),F&&Object(l.jsxs)(W,{onClose:E,classes:S.a.modal,children:[Object(l.jsx)("h4",{children:"Predicted Image:"}),Object(l.jsx)("img",{src:""===o?URL.createObjectURL(x):o,className:S.a.PredImg,style:{marginBottom:"1em"},alt:"sry"}),Object(l.jsxs)("h3",{children:["CALBOT predicts: ",Object(l.jsx)("i",{children:Object(l.jsx)("b",{children:h})})]}),Object(l.jsx)(w.a,{variant:"outlined",onClick:E,style:{margin:"1em"},children:"CLOSE"})]}),Object(l.jsx)("h2",{style:{margin:"2em"},children:"See the model in action by choosing a sample image"}),Object(l.jsx)("div",{className:q.root,children:Object(l.jsx)(N.a,{rowHeight:180,cols:M?3:2,className:q.imageList,children:Z.map((function(e){return Object(l.jsxs)(C.a,{children:[Object(l.jsx)("img",{className:S.a.clickable,src:e.img,alt:e.title,onClick:U,"data-key":e.key}),Object(l.jsx)(B.a,{id:"".concat(e.key),title:e.title})]},e.key)}))})}),Object(l.jsxs)("div",{className:S.a.DropContainer,children:[Object(l.jsx)("h2",{style:{margin:"1em"},children:"Or upload your own image"}),Object(l.jsx)("div",{className:S.a.drop,children:Object(l.jsxs)("div",Object(f.a)(Object(f.a)({},V({className:"dropzone"})),{},{children:[Object(l.jsx)("input",Object(f.a)({},Y())),Object(l.jsx)(w.a,{variant:"outlined",onClick:Q,children:Object(l.jsx)("span",{children:"UPLOAD"})}),Object(l.jsx)("p",{style:{padding:"20px"},children:"(Only *.jpg *.jpeg *.png)"})]}))}),(null!==x||""!==o)&&Object(l.jsxs)(c.a,{maxWidth:"sm",children:[Object(l.jsx)("h4",{children:"Chosen image: "}),Object(l.jsx)("img",{className:S.a.PredImg,src:""===o?URL.createObjectURL(x):o,alt:"sry"})]}),Object(l.jsxs)(c.a,{style:{marginTop:"2em"},children:[null!==x&&$,""!==o&&X]})]})]})},J=function(){return Object(l.jsxs)("footer",{style:{marginBottom:"3em",marginTop:"2em"},children:[Object(l.jsx)("h4",{style:{marginBottom:"0em"},children:"Source Code"}),Object(l.jsxs)("p",{children:["You can find the source code ",Object(l.jsx)("a",{href:"https://github.com/d7miiZ/Arabic-Font-Detector",target:"_blank",rel:"noreferrer",children:"here"})]})]})};var V=function(){return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("code",{style:{fontSize:"7em",fontFamily:"monospace",letterSpacing:"0.1em",fontWeight:""},children:"CALBOT"}),Object(l.jsx)(j,{}),Object(l.jsx)(x,{}),Object(l.jsx)(G,{}),Object(l.jsx)(J,{})]})};r.a.render(Object(l.jsx)(V,{}),document.getElementById("root"))},6:function(e,t,a){e.exports={drop:"Demo_drop__1IpNx",DropContainer:"Demo_DropContainer__3rUvM",selected:"Demo_selected__1VcG6",clickable:"Demo_clickable__2IqvA",PredBtn:"Demo_PredBtn__30aYe",margin:"Demo_margin__pTh2v",PredImg:"Demo_PredImg__P4KBU",modal:"Demo_modal__pgugO"}}},[[54,1,2]]]);
//# sourceMappingURL=main.86e66e7a.chunk.js.map